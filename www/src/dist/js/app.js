function getCookie(a){var b=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return b?decodeURIComponent(b[1]):void 0}function scan_card_by_id(a){var b=Messenger.finance.cards;for(var c in b)if(b[c].card_id==a)return b[c]}function secure(a,b,c,d){API("get_user_security_info",{target:d},!1,function(d){if("success"!=d.status)return swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",title:_chat_e("Ошибка"),type:"error",confirmButtonText:_chat_e("Ok"),cancelButtonText:_chat_e("Отменить"),showCancelButton:!1,text:_chat_e("Не удалось получить настройки безопасности для определненния типа  поддтверждения")});var e="",f="loan_api_check";"one_pass"==d.security_type&&(e=_chat_e("Введите код номер:")+" <strong>"+d.security_code_num+"</strong> "+_chat_e("из таблици кодов:")+' <strong style="font-size: 10px;">'+d.security_code_table_num+"</strong>"),"code"==d.security_type&&(e=_chat_e("Введите код из приложения")+" <strong>Webtransfer Auth</strong>"),"otp"==d.security_type&&(e=_chat_e("Введите код из ")+" <strong>Google Auth</strong>",f="otp"),"email"==d.security_type&&(e=_chat_e("Ваш код отправлен вам на почту: ")+" <strong>"+MyProfile.email+"</strong>"),swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Подтвердить"),cancelButtonText:_chat_e("Отменить"),showCancelButton:!0,text:'<div class="mv-area code-area-sec"><img class="img-main-section mx-wth-area" src="./src/img/user-s.png" onerror="this.src=\'../../.\'+this.src;this.onerror = null;"><form action="#" onsubmit="return false;"><div class="select-form"><label>'+e+'</label><input class="form-control" placeholder="'+_chat_e("Ваш код")+'" id="code_user_secure" autocomplete="off"></div></form><p class="spls-p">'+a+"</p><br></div>"}).then(function(a){b&&b({code:$("#code_user_secure").val(),type:f,success:!0})},function(){c&&c()})},!0)}function str2ab(a){for(var b=new ArrayBuffer(2*a.length),c=new Uint16Array(b),d=0,e=a.length;d<e;d++)c[d]=a.charCodeAt(d);return b}function etherscan(a,b,c,d,e){var f="";for(var g in c)c.hasOwnProperty(g)&&(f+=g+"="+c[g]+"&");$.ajax({url:"https://api.etherscan.io/"+a+"/"+b+"?"+f,method:"POST",data:d,success:function(a){e&&e(a)},error:function(a){noty({text:_chat_e("Не удалось загрузить список транзакций"),type:"warning",theme:"metroui",layout:"topCenter",timeout:4e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}})}})}function ethplorer(a,b,c,d,e){var f="",g="";for(var h in c)c.hasOwnProperty(h)&&(f+=h+"="+c[h]+"&");for(var i in d)d.hasOwnProperty(i)&&(g+=i+"="+d[i]+"&");$.ajax({url:"https://api.ethplorer.io/"+a+"/"+b+"?"+f,method:"POST",data:d,success:function(a){a&&(a=JSON.parse(a)),e&&e(a)},error:function(a){noty({text:_chat_e("Не удалось загрузить список транзакций"),type:"warning",theme:"metroui",layout:"topCenter",timeout:4e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}}),e&&e({})}})}function createWalletETH(a){var b=keythereum.create({keyBytes:32,ivBytes:16});swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Дальше"),cancelButtonText:_chat_e("Отменить"),showCancelButton:!0,text:'<div class="mv-area code-area-sec"><h3 style="font-size: 28px;">'+_chat_e("Создание аккаунта...")+'</h3><div class="alert alert-warning" style="width:300px;font-size: 14px;margin:0 auto;padding:6px 24px;margin-top:20px;text-align: left;margin-left: -10px;"><div style="width:10%;display:inline-block;    position: relative;top: -55px;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 78.561 78.561" style="enable-background:new 0 0 78.561 78.561" xml:space="preserve"><g><g><circle cx="39.28" cy="57.772" r="3.632" style="fill:#8f6d3b"></circle><path d="M38.792,48.347c1.104,0,2-0.896,2-2v-19c0-1.104-0.896-2-2-2s-2,0.896-2,2v19C36.792,47.451,37.688,48.347,38.792,48.347z " style="fill:#8f6d3b"></path><path d="M46.57,11.542l-0.091-0.141c-1.852-2.854-3.766-5.806-7.199-5.806c-3.578,0-5.45,2.994-7.26,5.891 c-0.009,0.014-0.065,0.104-0.074,0.119L0.278,65.266C0.096,65.574,0,65.735,0,66.092c0,3.896,3.135,6.874,6.988,6.874h64.585 c3.854,0,6.988-2.979,6.988-6.874c0-0.357-0.096-0.614-0.277-0.921L46.57,11.542z M71.573,68.966H6.988 c-1.461,0-2.717-0.951-2.95-2.394l31.374-53.061c1.554-2.487,2.572-3.963,3.868-3.963c1.261,0,2.457,1.87,3.843,4.006 l31.399,53.007C74.29,68.003,73.034,68.966,71.573,68.966z" style="fill:#8f6d3b"></path></g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg></div><div style="width:88%;display:inline-block;margin-left:2%"><strong style="font-weight:600!important">'+_e("Внимание")+"!</strong> "+_e("Этот пароль шифрует ваш закрытый ключ. Он не является способом для генерации ваших ключей. Вам понадобится этот пароль + ваш секретный ключ, чтобы разблокировать ваш кошелек.")+'</div></div><form action="#" onsubmit="return false;" style="margin-top: 20px;"><div class="select-form" style="padding-bottom: 15px;"><label>'+_chat_e("Адрес:")+'</label><input class="form-control" style="font-size: 11px;font-weight: 300;" value="'+keythereum.privateKeyToAddress(b.privateKey)+'" id="phone_f_fff" disabled="disabled"></div><label>'+_chat_e("Пароль для KeyStore File:")+'</label><input class="form-control" placeholder="'+_chat_e("(Пароль: 8-15 символов)")+'" id="code_sms12" autocomplete="off" type="password"></div></form><br></div>'}).then(function(c){var d=$("#code_sms12").val();swal({customClass:"swal-telegraf-modal select-form text-center",title:"Generate you Account...",closeOnConfirm:!1,allowOutsideClick:!1,allowEscapeKey:!0,showConfirmButton:!0,showCancelButton:!1,showLoaderOnConfirm:!0,text:_chat_e("Может занять несколько секунд"),preConfirm:function(){return new Promise(function(a,b){setTimeout(function(){a()},15e3)})}}),swal.showLoading();var e=keythereum.dump(d,b.privateKey,b.salt,b.iv,{kdf:"pbkdf2",cipher:"aes-128-ctr",kdfparams:{c:1024,dklen:32,prf:"hmac-sha256"}}),f=keythereum.exportToFile(e),g=keythereum.privateKeyToAddress(b.privateKey),h=keythereum.generateKeystoreFilename(e.address);setTimeout(function(){swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Скачать файл"),cancelButtonText:_chat_e("Отменить"),allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!0,showCancelButton:!0,text:'<div class="mv-area code-area-sec"><div class="alert alert-warning" style="width:300px;font-size: 14px;margin:0 auto;padding:6px 24px;margin-top:20px;text-align: left;margin-left: -10px;"><div style="width:10%;display:inline-block;    position: relative;top: -55px;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 78.561 78.561" style="enable-background:new 0 0 78.561 78.561" xml:space="preserve"><g><g><circle cx="39.28" cy="57.772" r="3.632" style="fill:#8f6d3b"></circle><path d="M38.792,48.347c1.104,0,2-0.896,2-2v-19c0-1.104-0.896-2-2-2s-2,0.896-2,2v19C36.792,47.451,37.688,48.347,38.792,48.347z " style="fill:#8f6d3b"></path><path d="M46.57,11.542l-0.091-0.141c-1.852-2.854-3.766-5.806-7.199-5.806c-3.578,0-5.45,2.994-7.26,5.891 c-0.009,0.014-0.065,0.104-0.074,0.119L0.278,65.266C0.096,65.574,0,65.735,0,66.092c0,3.896,3.135,6.874,6.988,6.874h64.585 c3.854,0,6.988-2.979,6.988-6.874c0-0.357-0.096-0.614-0.277-0.921L46.57,11.542z M71.573,68.966H6.988 c-1.461,0-2.717-0.951-2.95-2.394l31.374-53.061c1.554-2.487,2.572-3.963,3.868-3.963c1.261,0,2.457,1.87,3.843,4.006 l31.399,53.007C74.29,68.003,73.034,68.966,71.573,68.966z" style="fill:#8f6d3b"></path></g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg></div><div style="width:88%;display:inline-block;margin-left:2%"><strong style="font-weight:600!important">Do not lose it!</strong> It cannot be recovered if you lose it.<br><strong style="font-weight:600!important">Do not share it!</strong> Your funds will be stolen if you use this file on a malicious/phishing site.<br><strong style="font-weight:600!important">Make a backup!</strong> Secure it like the millions of dollars it may one day be worth.</div></div><form action="#" onsubmit="return false;" style="margin-top: 20px;"><div class="select-form"><label>'+_chat_e("Адрес:")+'</label><input class="form-control" style="font-size: 12px;font-weight: 600;" value="'+g+'" id="phone_f_fff" disabled="disabled"></div><label>'+_chat_e("Пароль для KeyStore File:")+'</label><input class="form-control" value="'+d+'" id="code_sms12" autocomplete="off" disabled="disabled"></div><label>PrivateKey:</label><textarea class="form-control" value="" id="code_sms12" autocomplete="off" disabled="disabled">'+b.privateKey.toString("hex")+"</textarea></div></form><br></div>"}).then(function(b){var c=$("#code_sms12").val(),d=window.document.createElement("a");d.href=window.URL.createObjectURL(new Blob([f],{type:"text"})),d.download=h,document.body.appendChild(d),d.click(),document.body.removeChild(d),keythereum.recover(c,e,function(b){a&&a(keythereum.privateKeyToAddress(b.toString("hex")),b.toString("hex"),"ETH")});try{if(window.cordova&&window.cordova.file){var g=new FileTransfer;window.resolveLocalFileSystemURL(cordova.file.dataDirectory,function(a){g.download(window.URL.createObjectURL(new Blob([f],{type:"text"})),a,function(a){console.log("download complete: "+a.toURL())},function(a){console.log("download error source "+a.source),console.log("download error target "+a.target),console.log("download error code"+a.code)},!1,{headers:{Authorization:"Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="}})})}}catch(a){console.error("ERR DOWNL FILE 4214: ",a)}}),swal.showLoading()},2500)},function(){swal.close()})}function importFromPrivateKeyETH(a){swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Дальше"),cancelButtonText:_chat_e("Отменить"),showCancelButton:!0,text:'<div class="mv-area code-area-sec"><h3 style="font-size: 28px;">'+_chat_e("Импорт крипто кошелька...")+'</h3><form action="#" onsubmit="return false;" style="margin-top: 20px;"><div class="select-form" style="padding-bottom: 15px;"><label>'+_chat_e("Private Key:")+'</label><input class="form-control" placeholder="0x..................." id="code_sms12" autocomplete="off" type="text"></div></form><br></div>'}).then(function(b){var c=$("#code_sms12").val();a&&a(keythereum.privateKeyToAddress(c),c,"ETH")})}function importFromKeyStoreETH(a,b){swal({customClass:"swal-telegraf-modal select-form text-center",title:"Upload you file...",closeOnConfirm:!1,allowOutsideClick:!1,allowEscapeKey:!0,showConfirmButton:!0,showCancelButton:!1,showLoaderOnConfirm:!0,text:_chat_e("Может занять несколько секунд"),preConfirm:function(){return new Promise(function(a,b){setTimeout(function(){a()},15e3)})}}),swal.showLoading();var c=a.target.files[0];if(c){var d=new FileReader;d.onload=function(a){var c=a.target.result;try{var d=JSON.parse(c);swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Войти"),cancelButtonText:_chat_e("Отменить"),showCancelButton:!0,text:'<div class="mv-area code-area-sec"><h2>'+_chat_e("Восстановление аккаунта:")+'</h2><form action="#" onsubmit="return false;" style="margin-top: 20px;"><div class="select-form"><label>'+_chat_e("Адрес:")+'</label><input class="form-control" style="font-size: 11px;font-weight: 300;" value="0x'+d.address+'" id="phone_f_fff" disabled="disabled"></div><label>'+_chat_e("Пароль")+'</label><input class="form-control" placeholder="'+_chat_e("Пароль от KeyStore File:")+'" id="code_sms12" autocomplete="off" type="password"></div></form><br></div>'}).then(function(){var a=$("#code_sms12").val();swal({customClass:"swal-telegraf-modal select-form text-center",title:"Open you Account...",closeOnConfirm:!1,allowOutsideClick:!1,allowEscapeKey:!0,showConfirmButton:!0,showCancelButton:!1,showLoaderOnConfirm:!0,text:_chat_e("Может занять несколько секунд"),preConfirm:function(){return new Promise(function(a,b){setTimeout(function(){a()},15e3)})}}),swal.showLoading();var c=setTimeout(function(){return swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("Неверный файл или пароль!")})},3e3);console.log(keythereum.recover(a,d,function(a){clearTimeout(c),swal.close(),b&&b(keythereum.privateKeyToAddress(a.toString("hex")),a.toString("hex"),"ETH")}))},function(){swal.close()})}catch(a){return swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("Файл не является KeyStore File - выберите другой файл.")})}},d.readAsText(c)}}window.__cards_storage=!1,window.__wallet_storage=!1,window.__crypto_wallet_dbc=!1,window.__crypto_wallets=[];try{window.__cards_storage=JSON.parse(localStorage.getItem("cards")),window.__wallet_storage=JSON.parse(localStorage.getItem("wallet")),window.__crypto_wallet_dbc=JSON.parse(localStorage.getItem("crypto_wallet_dbc")),window.__crypto_wallets=JSON.parse(localStorage.getItem("crypto_wallets_db"+localStorage.user_id)||localStorage.getItem("crypto_wallets_db"))}catch(a){console.warn("JSON warn localStorage:",a)}!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.lsbridge=b()}(this,function(){var a={};if(a.isLSAvailable=function(){var a="_";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(a){return!1}}(),a.isLSAvailable){var b=100,c=200,d=localStorage,e={},f=!1,g={},h=function(){for(var a in e){var f=d.getItem(a);if(f&&g[a]&&-1===g[a].indexOf(f)){g[a].push(f);try{var i=JSON.parse(f);i&&(f=i)}catch(a){}for(var j=0;j<e[a].length;j++)e[a][j](f);d.getItem(a+"-removeit")||(d.setItem(a+"-removeit","1"),function(b){setTimeout(function(){d.removeItem(b),d.removeItem(b+"-removeit"),g[a]=[]},c)}(a))}else f||(g[a]=[])}return setTimeout(h,b),!0};a.send=function(a,b){var c="";"function"==typeof b&&(b=b()),c="object"==typeof b?JSON.stringify(b):b,d.setItem(a,c)},a.subscribe=function(a,b){e[a]||(e[a]=[],g[a]=[]),e[a].push(b),f||(f=h())},a.unsubscribe=function(a){e[a]&&(e[a]=[]),g[a]&&(g[a]=[])},a.getBuffer=function(){return g}}else a.send=a.subscribe=function(){throw new Error("localStorage not supported.")};return a});var Messenger={event:{},page:null,on:function(a,b){Messenger.event[a]=b},setNotificationsCount:function(a,b){if("+"==a&&(!0,a=ractiveComponent.rootApp.get("notificationCount")+1),0==a||null==a)return!1;ractiveComponent.rootApp.set("notificationCount",a),a=0==a?"":(+a).toString(),gui&&win&&win_gui.setBadgeLabel(a)},setPage:function(a,b,c){var d=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IS","IE","IT","LV","LI","LU","MT","NL","PL","NO","PT","RO","SK","SI","ES","SE","UK","AD","MC","SM","VA","GI","GL","IM","ES-CN","PT","JE","GG","CH","IL","TR"];if("order"===a&&-1===d.indexOf(getCookie("country")||"NULL"))return swal({customClass:"swal-telegraf-modal select-form",buttonsStyling:!1,confirmButtonClass:"button-n",type:"error",title:_chat_e("Ошибка"),html:_chat_e("Приносим извинения, в данный момент банк-эмитент не выпускает карты в вашем регионе.<br>В ближайшее время ожидается решение вопроса."),confirmButtonColor:"#3085d6",showCancelButton:!1,confirmButtonText:_chat_e("Ок")}),!1;ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].unrender();var e=a.split(":");a=e[0],console.log("setPage:",a,e[1],b),e[1]&&(b=e[1]),e[2]&&(b=e[1]),Messenger.chat.openChat=null,$("nav#menu").data("mmenu").close(),ractiveComponent.rootApp.set("pageActive","contentApplication"),"chats"==a&&requireElement({name:"Dialogs",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render()}}),"exchanges"==a&&requireElement({name:"Exchanges",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render()}}),"localbitcoin"==a&&requireElement({name:"Localbitcoin",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render()}}),"contacts"==a&&requireElement({name:"Contacts",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&(ractiveComponent[Messenger.page].render(),ractiveComponent["wtc-ContactsApp"].set("tab",b))}}),"debitcoin"==a&&(a="CryptoWallet"),"CryptoWallet"==a&&requireElement({name:"Cryptowallet",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){b||(b="all"),a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&(ractiveComponent[Messenger.page].render(),b&&ractiveComponent["wtc-CryptowalletApp"].set("tab",b))}}),"deposits"==a&&requireElement({name:"Deposits",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&(ractiveComponent[Messenger.page].render(),b&&ractiveComponent["wtc-DepositsApp"].set("tab",b))}}),"bonus"==a&&requireElement({name:"Bonus",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&(ractiveComponent[Messenger.page].render(),b&&(bonus_tab=b,ractiveComponent["wtc-BonusApp"].set("tab",b)))}}),"legal"==a&&requireElement({name:"Legal",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&(ractiveComponent[Messenger.page].render(),b&&ractiveComponent["wtc-LegalApp"].set("tab",b))}}),"profile"==a&&requireElement({name:"Profile",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render()}}),"dialog"==a&&requireElement({name:"Chat",ver:"1.1.0",element:"#chat-content_message"}),"cards"==a&&requireElement({name:"Cards",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render()}}),"topup"==a&&requireElement({name:"Topup",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render(),ractiveComponent[Messenger.page].set("select_card",b)}}),"order"==a&&(e[1]&&(Messenger.body.order_card.tabPage=e[1]),Messenger.body.order_card.tabPage||(Messenger.body.order_card.tabPage="virtual"),Messenger.body.order_card.callback&&Messenger.body.order_card.callback(),requireElement({name:"Order",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render()}})),"guarantee"==a&&(e[1]&&(Messenger.body.guarantee.tabPage=e[1]),Messenger.body.guarantee.tabPage||(Messenger.body.guarantee.tabPage="create"),Messenger.body.guarantee.callback&&Messenger.body.guarantee.callback(),requireElement({name:"Guarantee",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render()}})),"affiliates"==a&&(e[1]&&(Messenger.body.Affiliates.tabPage=e[1]),Messenger.body.Affiliates.tabPage||(Messenger.body.Affiliates.tabPage="about"),Messenger.body.Affiliates.callback&&Messenger.body.Affiliates.callback(),requireElement({name:"Affiliates",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render()}})),"sendmoney"==a&&requireElement({name:"Sendmoney",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render()}}),"Chatinfo"==a&&(ractiveComponent.rootApp.set("pageActive","contentApplication_more"),requireElement({name:"Chat_info",ver:"1.1.0",element:"#contentApplication_more"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render()}}),$("#contentApplication_more").animateCss("slideInDown")),"settings"==a&&(Messenger.body.settings.tabPage=e[1],Messenger.body.settings.callback&&Messenger.body.settings.callback(),requireElement({name:"Settings",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render(),ractiveComponent["wtc-SettingsApp"].set("tabPage",Messenger.body.settings.tabPage)}}),ractiveComponent["wtc-SettingsApp"],ractiveComponent.rootApp.set("tabPage",Messenger.body.settings.tabPage)),"ProfileEdit"==a&&requireElement({name:"ProfileEdit",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render(),ractiveComponent["wtc-ProfileEditApp"].set("tab",b),console.error("err",b)}}),"credit"==a&&(e[1]&&(Messenger.body.credit.tabPage=e[1]),Messenger.body.credit.tabPage||(Messenger.body.credit.tabPage="loans"),Messenger.body.credit.callback&&Messenger.body.credit.callback(),requireElement({name:"Credit",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render()}})),"info_card"==a&&requireElement({name:"Info_card",ver:"1.1.0",element:"#contentApplication"},{cnt:0,afterlast:function(a){a&&(a+="App"),Messenger.page=a,ractiveComponent&&Messenger.page&&ractiveComponent[Messenger.page]&&!ractiveComponent[Messenger.page].fragment.rendered&&ractiveComponent[Messenger.page].render()}}),c||history.pushState({},"Telegraf Money","#"+a+"-"+b),ractiveComponent.rootApp.set("page",a)},MyProfileUpdate:function(){for(var a in ractiveComponent)ractiveComponent[a].set("MyProfile",MyProfile);localStorage.setItem("MyProfile",JSON.stringify(MyProfile))},body:{order_card:{},settings:{},credit:{},guarantee:{},Affiliates:{}},finance:{cards:window.__cards_storage,cards_all:[],crypto_wallet_dbc:window.__crypto_wallet_dbc,callback_cnt:0,microinvests:[],data:{wallet:window.__wallet_storage},update_wait:!1,update:function(){MyProfile?API("get_finance_data_this_user",{},!1,function(a){var b=[];for(var c in a.cards){if(a.cards.hasOwnProperty(c))for(var d in a.cards[c].demand)a.cards[c].demand.hasOwnProperty(d)&&(a.cards[c].demand[d].card={card_currency:a.cards[c].card_currency,card_id:a.cards[c].card_id,card_name:a.cards[c].card_name,card_name_short:a.cards[c].card_name_short,card_type:a.cards[c].card_type,id:a.cards[c].id,last_balance:a.cards[c].last_balance,name_on_card:a.cards[c].name_on_card,send_money_limit:a.cards[c].send_money_limit});b=b.concat(a.cards[c].demand);var e=0,f=0,g=0;for(var h in a.cards[c].demand)e+=+a.cards[c].demand[h].summa,f+=+a.cards[c].demand[h].current_income,g+=+a.cards[c].demand[h].summa+a.cards[c].demand[h].current_income;a.cards[c].invest_ammount=+e.toFixed(2),a.card_start_balanses[a.cards[c].card_id]?a.cards[c].card_start_balanses=+a.card_start_balanses[a.cards[c].card_id]:a.cards[c].card_start_balanses=0,a.cards[c].profit_ammount=+f.toFixed(2),a.cards[c].demand_ammount=+g.toFixed(2),a.cards[c].total_balance=+(a.cards[c].demand_ammount+a.cards[c].last_balance).toFixed(2)}for(var d in b)Messenger.finance.microinvests=b;Messenger.finance.data=a,Messenger.finance.cards=a.cards;for(var d in Messenger.finance.cb_function_arr)Messenger.finance.cb_function_arr[d](Messenger.finance.cards,Messenger.finance.microinvests,!1,Messenger.finance.data);localStorage.setItem("cards",JSON.stringify(Messenger.finance.cards)),localStorage.setItem("wallet",JSON.stringify(Messenger.finance.data.wallet)),API("get_cards_info",{},function(a){Messenger.finance.cards_all=a.cards.wtcards_list;for(var b in Messenger.finance.cb_function_arr)Messenger.finance.cb_function_arr[b](Messenger.finance.cards,Messenger.finance.microinvests,Messenger.finance.cards_all,Messenger.finance.data)}),Messenger.finance.update_at=new Date},!0):Messenger.finance.update_wait=!0},cb_function_arr:[],callback_save:function(a){Messenger.auth_action.call_wait_auth(function(){if(Messenger.finance.cb_function_arr.push(a),Messenger.finance.cb_function_arr.length<=1){try{a(JSON.parse(localStorage.getItem("cards")))}catch(a){console.error(a)}Messenger.finance.update()}else Messenger.finance.update_at||Messenger.finance.update(),a(Messenger.finance.cards,Messenger.finance.microinvests,Messenger.finance.cards_all,Messenger.finance.data)})},update_at:null},guarantee:{data:[],update_wait:!1,update:function(){MyProfile?API("getOrdersData",{mode:"all",bonus:9},function(a){Messenger.guarantee.data=a.orders;for(var b in Messenger.guarantee.cb_function_arr)Messenger.guarantee.cb_function_arr[b](Messenger.guarantee.data);Messenger.guarantee.update_at=new Date}):Messenger.guarantee.update_wait=!0},cb_function_arr:[],callback_save:function(a){Messenger.guarantee.cb_function_arr.push(a),Messenger.guarantee.cb_function_arr.length<=1?Messenger.guarantee.update():a(Messenger.guarantee.data)},update_at:null},chat:{data:[],threads:{},scrollLoad:!0,openChat:null,read:!0,openChat_param_type:null,page:0,callback:!1,callback_save:function(a){this.callback=a,this.callback&&this.callback()},message:function(a){var b=_find(Messenger.threads.data,"id",a.threads_id._id),c=!0,d={group_name:a.threads_id.group_name,id:a.threads_id._id,last_message:a.threads_id.last_message.message,last_message_messageId:a.threads_id.last_message.messageId,last_message_read:a.threads_id.last_message.read,last_message_sender_id:a.threads_id.last_message.sender,unread_count_this_thread:a.threads_id.unread_count_this_thread,last_online_text:"Invalid date",online:0,spam:!1,type_threads:a.threads_id.type,updated_at:a.threads_id.update_at};if(d.my_id=MyProfile.webtransfer_id,a.sender.webtransfer_id!=MyProfile.webtransfer_id&&(d.avatar_path=a.sender.avatar_path,d.webtransfer_id=a.sender.webtransfer_id,d.name_short=a.sender.name_short,d.last_online_at=a.sender.last_online_at,d.full_name=a.sender.name_first+" "+a.sender.name_last),null!=d.updated_at){var e=d.updated_at.split("T")[0],f=moment(d.updated_at,moment.ISO_8601);moment().format("YYYY-MM-DD")==e?d.updated_at_text=f.format("HH:mm"):moment().subtract(f.day(),"day").hours(0).minutes(0).second(0)<=f&&6!=f.day()?d.updated_at_text=f.format("ddd"):d.updated_at_text=f.format("DD.MM.YY"),d.last_message&&""!=d.last_message?d.last_message=d.last_message.replace(/<\/?[^>]+>/g,""):d.last_message="...","https://webtransfer.com/assets/missing_avatar_thumb.jpeg"==d.avatar_path&&(d.avatar_path=!1)}if(!1!==b)for(var g in d)d.hasOwnProperty(g)&&(Messenger.threads.data[b][g]=d[g]);else if(d.webtransfer_id)Messenger.threads.data.push(d);else for(var h in a.threads_id.users)a.threads_id.users[h].webtransfer_id!=MyProfile.webtransfer_id&&API("userInfo",{webtransfer_id:a.threads_id.users[h].webtransfer_id},function(a){d.avatar_path=a.user.avatar_path,d.webtransfer_id=a.user.webtransfer_id,d.name_short=a.user.name_short,d.last_online_at=a.user.last_online_at,d.full_name=a.user.name_first+" "+a.user.name_last,Messenger.threads.data.unshift(d)},!0);Messenger.threads.update();var i=!1;if(a.threads_id.users.forEach(function(b){b.webtransfer_id==Messenger.chat.openChat&&(i=!0,Messenger.chat.open(a.threads_id._id,"threads_id"))}),!i&&"threads_id"==Messenger.chat.openChat_param_type&&a.threads_id._id==Messenger.chat.openChat){if(a.message){var j=a.message.split("###");console.log(j);for(var k in j)j.hasOwnProperty(k)&&j[k]===_chat_e("lang_name")&&(a.message=j[k+1])}var l=moment(a.update_at,moment.ISO_8601);if(a.updated_at_time=l.format("HH:mm"),a.updated_at_date=l.format("DD.MM.YYYY"),a.sender.webtransfer_id!=MyProfile.webtransfer_id)Messenger.setNotificationsCount(null,!0),c=!1,Messenger.chat.data.push(a);else{c=!1;for(var m=!1,n=0,o=Messenger.chat.data.length;n<o;n++)Messenger.chat.data[n].message_hesh==a.message_hesh&&(Messenger.chat.data[n]=a,m=!0);m||Messenger.chat.data.push(a)}if($("#contentMessageScroll").nanoScroller(),Messenger.chat.callback&&Messenger.chat.callback(),Messenger.chat.prcScroll>95){var p={};p[Messenger.chat.openChat_param_type]=Messenger.chat.openChat,API("thread_read",p),Messenger.threads.data.forEach(function(a,b){a.id==Messenger.chat.openChat&&(Messenger.threads.data[b].unread_count_this_thread=0)}),Messenger.threads.update(),$("#contentMessageScroll").nanoScroller().nanoScroller({scroll:"bottom"})}else Messenger.chat.read=!1}!0===c&&Messenger.setNotificationsCount("+",!0)},send:function(a,b){if("console_help"==a){if(noty({text:"console1531 (showDevTools),consoleMyProfile (show var MyProfile)",type:"information",theme:"metroui",layout:"topCenter",timeout:1e4,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}}),window.nw){var c=nw.Window.get();c.showDevTools()}return ractiveComponent.rootApp.set("send_wait",!1),send_wait=!1,!1}if("console1531"==a){if(noty({text:_chat_e("Developer cmd init..."),type:"information",theme:"metroui",layout:"topCenter",timeout:2e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}}),window.nw){var c=nw.Window.get();c.showDevTools()}return ractiveComponent.rootApp.set("send_wait",!1),send_wait=!1,!1}if("consoleMyProfile"==a)return Messenger.chat.data.push({message:JSON.stringify(MyProfile),wait:!0,error:!0,message_hesh:"dev",sender:MyProfile}),$("#contentMessageScroll").nanoScroller().nanoScroller({scroll:"bottom"}),ractiveComponent.rootApp.set("send_wait",!1),send_wait=!1,!1;if("console_connect_param"==a)return Messenger.chat.data.push({message:JSON.stringify(paramSocket),wait:!0,error:!0,message_hesh:"dev",sender:MyProfile}),$("#contentMessageScroll").nanoScroller().nanoScroller({scroll:"bottom"}),ractiveComponent.rootApp.set("send_wait",!1),send_wait=!1,!1;var d={message:a,message_hesh:guid()};d[Messenger.chat.openChat_param_type]=this.openChat,b&&(d.message_attach=b),Messenger.chat.data.push({message:a,wait:!0,message_hesh:d.message_hesh,sender:MyProfile}),Messenger.chat.callback&&Messenger.chat.callback();var e={};e[Messenger.chat.openChat_param_type]=Messenger.chat.openChat,API("thread_read",e),Messenger.threads.data.forEach(function(a,b){a.id==Messenger.chat.openChat&&(Messenger.threads.data[b].unread_count_this_thread=0)}),Messenger.threads.update(),$("#contentMessageScroll").nanoScroller().nanoScroller({scroll:"bottom"}),setTimeout(function(){ractiveComponent.rootApp.set("send_wait",!1),send_wait=!1},10),API("create_message",d,function(a){if(ractiveComponent.rootApp.set("send_wait",!1),send_wait=!1,a.error){"access"==a.error?noty({text:_chat_e("Вам ограничен доступ в данном чате!"),type:"error",theme:"metroui",layout:"topCenter",timeout:3e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}}):noty({text:_chat_e("Ошибка сообшение не отправленно причина:")+a.error,type:"error",theme:"metroui",layout:"topCenter",timeout:3e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}});for(var b=0,c=Messenger.chat.data.length;b<c;b++)Messenger.chat.data[b].message_hesh==a.message_hesh&&(Messenger.chat.data[b].error=!0,Messenger.chat.callback&&Messenger.chat.callback())}Messenger.chat.prcScroll=100})},getHistory:function(a){Messenger.chat.page++;var b={page:Messenger.chat.page};b[Messenger.chat.openChat_param_type]=Messenger.chat.openChat,API("get_messages",b,!1,function(b){if(b&&b.threads||(Messenger.chat.data=[]),b.threads&&"group"==b.threads.type){var c={avatar_path:!1|b.threads.avatar_path,count_reviews:0|b.threads.count_reviews,full_name:b.threads.full_name,group_name:b.threads.group_name,group_photo:b.threads.group_photo,group_verefy:b.threads.group_verefy,id:b.threads._id,last_message:b.threads.last_message.message,last_message_messageId:b.threads.last_message.messageId,last_message_read:b.threads.last_message.read,last_message_sender_id:b.threads.last_message.sender,last_online:"Invalid date",last_online_at:!1,my_id:MyProfile.webtransfer_id,name_short:"SL",rating:0,spam:!1,type_threads:b.threads.type,unread_count_this_thread:0,updated_at:b.threads.update_at,updated_at_text:null,user_count:b.threads.user_count,users:b.threads.users,webtransfer_id:null};ractiveComponent.rootApp.set("open_threads",c),Messenger.threads.open=c}Messenger.chat.threads=b.threads;for(var d in b.messages){if(b.messages[d].updated_at_time=moment(b.messages[d].update_at,moment.ISO_8601).format("HH:mm"),b.messages[d].updated_at_date=moment(b.messages[d].update_at,moment.ISO_8601).format("DD.MM.YYYY"),b.messages[d].message){console.log(b.messages[d].message);var e=b.messages[d].message.split("###"+_chat_e("lang_name")+"###");for(var f in e)e.hasOwnProperty(f)&&(e[1]?b.messages[d].message=e[1]:b.messages[d].message=e[0])}Messenger.chat.data.unshift(b.messages[d])}if(1==Messenger.chat.page&&(Messenger.chat.prcScroll=100),Messenger.chat.callback&&Messenger.chat.callback(),$("#contentMessageScroll").nanoScroller(),Messenger.chat.prcScroll>95){var g={};g[Messenger.chat.openChat_param_type]=Messenger.chat.openChat,API("thread_read",g),Messenger.threads.data.forEach(function(a,b){a.id==Messenger.chat.openChat&&(Messenger.threads.data[b].unread_count_this_thread=0)}),Messenger.threads.update(),setTimeout(function(){$("#contentMessageScroll").nanoScroller().nanoScroller({scroll:"bottom"})},100)}0==b.messages.length&&ractiveComponent["wtc-ChatApp"].set("messages_more",!1),a&&a()})},read_this_chat:function(a){if(a._id==Messenger.chat.openChat||a.webtransfer_id==Messenger.chat.openChat)for(var b in Messenger.chat.data)Messenger.chat.data.hasOwnProperty(b)&&(Messenger.chat.data[b].read_at=(new Date).toString());setTimeout(function(){Messenger.chat.callback&&Messenger.chat.callback()},10)},open:function(a,b){Messenger.chat.openChat=a,Messenger.chat.openChat_param_type=b,Messenger.chat.scrollLoad=!0,Messenger.chat.data=[],Messenger.chat.callback&&Messenger.chat.callback(),ractiveComponent["wtc-ChatApp"]&&ractiveComponent["wtc-ChatApp"].set("messages_load",!1),Messenger.chat.page=0,Messenger.chat.getHistory(),document.getElementById("send_text").focus(),window.pos_caret=save_pos_caret()},prcScroll:100,lastElement:null,onscroll:function(a){if(Messenger.chat.pos=a.maximum-a.position,a.maximum-a.position<50?Messenger.chat.prcScroll=100:Messenger.chat.prcScroll=50,100==Messenger.chat.prcScroll&&!Messenger.chat.read){var b={};b[Messenger.chat.openChat_param_type]=Messenger.chat.openChat,API("thread_read",b),Messenger.threads.update()}}},partners:{data:[],update:function(){API("contacts",{page:"all"},!1,function(a){a.contacts.forEach(function(a){a.last_online=moment(a.online_date,moment.ISO_8601).fromNow()}),Messenger.partners.data=a.contacts;for(var b in Messenger.partners.cb_function_arr)Messenger.partners.cb_function_arr[b](Messenger.partners.data)})},cb_function_arr:[],callback_save:function(a){Messenger.partners.cb_function_arr.push(a),0==Messenger.partners.data.length?Messenger.partners.update():a(Messenger.partners.data)}},friends:{data:[],update:function(){API("getFriends",{page:"all"},!1,function(a){Messenger.friends.data=a.friends.map(function(a){return a.friend.info.last_online=moment(a.friend.info.last_online_at,moment.ISO_8601).fromNow(),a.friend.info.full_name=a.friend.info.name_first+" "+a.friend.info.name_last,a.friend.info});for(var b in Messenger.friends.cb_function_arr)Messenger.friends.cb_function_arr[b](Messenger.friends.data)})},cb_function_arr:[],callback_save:function(a){Messenger.friends.cb_function_arr.push(a),0==Messenger.friends.data.length?Messenger.friends.update():a(Messenger.friends.data)}},threads:{scrollLoad:!0,data:[],page:1,finish:!1,update:function(a,b){function c(a,b){return moment(a.updated_at,moment.ISO_8601)<moment(b.updated_at,moment.ISO_8601)?1:moment(a.updated_at,moment.ISO_8601)>moment(b.updated_at,moment.ISO_8601)?-1:0}if(0==Messenger.threads.data.length&&(Messenger.threads.data=[],Messenger.threads.page=1,a=!0),a&&!Messenger.threads.finish)return API("get_threads",{page:Messenger.threads.page},!1,function(a){a.threads.length>=30?Messenger.threads.finish=!1:Messenger.threads.finish=!0,a.threads.forEach(function(a){var b=_find(Messenger.threads.data,"id",a.id);if(null!=a.updated_at){var c=a.updated_at.split("T")[0],d=moment(a.updated_at,moment.ISO_8601);if(moment().format("YYYY-MM-DD")==c?a.updated_at_text=d.format("HH:mm"):moment().subtract(d.day(),"day").hours(0).minutes(0).second(0)<=d&&6!=d.day()?a.updated_at_text=d.format("ddd"):a.updated_at_text=d.format("DD.MM.YY"),a.last_message&&(a.last_message=a.last_message.replace(/<\/?[^>]+>/g,"")),a.avatar_path&&(a.avatar_path=a.avatar_path.replace("http://","https://")),"https://webtransfer.com/assets/missing_avatar_thumb.jpeg"==a.avatar_path&&(a.avatar_path=!1),a.last_message){var e=a.last_message.split("###"+_chat_e("lang_name")+"###");for(var f in e)e.hasOwnProperty(f)&&(e[1]?a.last_message=e[1]:a.last_message=e[0])}a.my_id=MyProfile.webtransfer_id,!1!==b?Messenger.threads.data[b]=a:Messenger.threads.data.push(a)}}),Messenger.threads.update(),Messenger.threads.page++,Messenger.threads.scrollLoad=!0}),!1;b||Messenger.threads.data.sort(c);for(var d in Messenger.threads.cb_function_arr)Messenger.threads.cb_function_arr[d](Messenger.threads.data)},cb_function_arr:{},callback_save:function(a,b){Messenger.threads.cb_function_arr[a]=b,0===Messenger.threads.data.length?Messenger.threads.update():b(Messenger.threads.data)}},auth_action:{status:!1,cb_function_arr:[],call_wait_auth:function(a){Messenger.auth_action.status?a():Messenger.auth_action.cb_function_arr.push(a)},auth_emit:function(){if(!Messenger.auth_action.status){Messenger.auth_action.status=!0;for(var a in Messenger.auth_action.cb_function_arr)Messenger.auth_action.cb_function_arr[a]();Messenger.auth_action.cb_function_arr=[]}},FingerprintAuth:function(a,b,c){console.log(" FingerprintAuth testing..."),window.touchid||c&&c({error:"Auth error",code:404,ios:!1,android:!1}),MyProfile.secure_touch_id||c&&c({error:"Auth error",code:429,ios:!1,android:!1}),touchid.checkSupport(function(){console.log("touchid available: "+a),touchid.authenticate(function(){b&&b({ios:!0})},function(){c&&c({error:"Auth error",code:403,ios:"touch id authenticate error",android:!1})},a)},function(){FingerprintAuth.isAvailable(function(d){if(console.log("FingerprintAuth available: "+a),d.isAvailable){var e={clientId:"com.telegraf.money",username:"currentUser",password:"currentUserPassword",dialogTitle:_chat_e("Подтверждения действия"),dialogMessage:a};FingerprintAuth.encrypt(e,function(a){a.withFingerprint?b&&b(a):a.withBackup&&c&&c({error:"Auth error",code:403,ios:!1,android:"FingerprintAuth password error"})},function(a){"Cancelled"===a?c&&c({error:"Auth error",code:403,ios:!1,android:"FingerprintAuth Cancelled"}):c&&c({error:"Auth error",code:403,ios:!1,android:"FingerprintAuth error: "+a})})}else c&&c({error:"Auth error",code:403,ios:!1,android:"FingerprintAuth error"})},function(a){c&&c({error:"Not found fingerprint",code:404,ios:"checkSupport: false",android:a})})})}},auth:function(a){if(a.status&&"success"==a.status){if(clearTimeout(auth_timeout),MyProfile=a.user,Messenger.MyProfileUpdate(),Messenger.auth_action.auth_emit(),param_url_this().openDialog)Messenger.setPage("chats"),Messenger.openChat(!1,param_url_this().openDialog),setTimeout(function(){Messenger.setPage("chats")},1e3);else if(param_url_this().default_page){var b=param_url_this().default_page.split(":");"chat"==b[0]&&("threads_id"==b[1]&&Messenger.openChat(!1,!1,b[2]),"recipient_id"==b[1]&&Messenger.openChat(!1,b[2]))}API("countUnreadMessage",{},!1,function(a){Messenger.setNotificationsCount(a.count)}),Messenger.finance.callback_save(function(a){ractiveComponent.rootApp.set("finance_cards",a),a&&0==a.length&&Messenger.finance.callback_cnt>=1&&Messenger.finance.callback_cnt<100&&(Messenger.finance.callback_cnt=101),Messenger.finance.callback_cnt++,ractiveComponent.rootApp.set("finance_cards_load",!0)}),Messenger.finance.update_wait&&Messenger.finance.update(),"see"!=localStorage.getItem("post1")&&(new Date("2017-04-25 23:44:17").getTime()>(new Date).getTime()&&swal({customClass:"swal-telegraf-modal select-form text-rg",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",title:"",type:"",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,html:'<img src="https://s3-us-west-2.amazonaws.com//telegraf-ava/avatar/10989451.png" style="     position: relative;     width: 21px; "><span class="fcg" style=" ">   <span class="fwb"><a class="pointer">Telegraf Money</a></span>   '+_chat_e("поделился(-ась)")+' <a class="pointer">'+_chat_e("публикацией")+'</a> .</span><hr style="margin: 10px;">  '+_chat_e("Репостни и получи $25 на ЭПС или карту WT VISA")+"<br>"+_chat_e("Всё просто: нужно сделать репост записи, указанной ниже!")+"<br>"+_chat_e("Конкурс считается действительным, если его поддержали 100 участников!")+"<br>"+_chat_e("Победитель будет выбран случайным образом из числа репостнувших 25.04.2017")+"<br> ❗️"+_chat_e("Если конкурсы будут пользоваться популярностью, то они будут проходить на постоянной основе при поддержке партнеров!")+'<br><iframe src="https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2FTelegrafMoney%2Fphotos%2Fa.1327454147273051.1073741828.1318448904840242%2F1549842071700923%2F%3Ftype%3D3%26theater&width=500&show_text=true&appId=316202461909215&height=426" width="100%" style="    border: none;overflow: hidden;height: 400px;margin-top: 10px;background: #fff;" scrolling="no" frameborder="0" allowTransparency="true"></iframe>'}),localStorage.setItem("post1","see"))}else if("crypto.wallet.eth.auth"!==localStorage.getItem("installTime"))swal({title:_chat_e("Уппс..."),text:_chat_e("Попробуйте авторизоавтся повторно или перегрузить приложение."),customClass:"swal-telegraf-modal",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",showCancelButton:!0,type:"error",cancelButtonText:_chat_e("Перегрузить"),confirmButtonText:_chat_e("Выйти"),showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(a,b){var c=setTimeout(function(){b(_chat_e("Ошибка сервер недоступен."))},1e4);API("logout_this_user",{code:localStorage.getItem("installTime"),uuid:localStorage.getItem("uuid")},!0,function(b){clearTimeout(c),localStorage.clear(),a()}),setTimeout(function(){localStorage.clear(),location.reload()},4999)})},allowOutsideClick:!1}).then(function(){location.reload(),swal.closeModal()},function(){location.reload(),swal.closeModal()});else{var c=localStorage.getItem("walletPrivateKey"),d=keythereum.privateKeyToAddress(c);MyProfile={first_name:d,last_name:"",name_short:d[2]+d[3],status:"success",webtransfer_id:d},localStorage.setItem("MyProfile",JSON.stringify(MyProfile)),Messenger.MyProfileUpdate(),noty({text:_chat_e("Не удается установить соединение с серверами Telegraf.Money"),type:"error",theme:"metroui",layout:"top",timeout:3e3,progressBar:!0})}},serverDisconnect:function(){console.warn("server:serverDisconnect")},openChat:function(a,b,c){Messenger.setPage("dialog"),a&&(a.last_online=moment(a.last_online_at,moment.ISO_8601).fromNow(),console.log(a),console.log(a.last_online_at),ractiveComponent.rootApp.set("open_threads",a),Messenger.threads.open=a,a.id?Messenger.chat.open(a.id,"threads_id"):Messenger.chat.open(a.webtransfer_id,"recipient_id")),b&&API("userInfo",{webtransfer_id:b},!1,function(a){a={full_name:a.user.name_first+" "+a.user.name_last,last_online_at:a.user.last_online_at,name_short:a.user.name_short,webtransfer_id:a.user.webtransfer_id,avatar_path:a.user.avatar_path},ractiveComponent.rootApp.set("open_threads",a),Messenger.threads.open=a,Messenger.chat.open(b,"recipient_id")},!0),c&&API("create_thread",{threads_id:c},!1,function(a){a={avatar_path:!1|a.threads.avatar_path,count_reviews:0|a.threads.count_reviews,full_name:a.threads.full_name,group_name:a.threads.group_name,group_photo:a.threads.group_photo,group_verefy:a.threads.group_verefy,id:a.threads._id,last_message:a.threads.last_message.message,last_message_messageId:a.threads.last_message.messageId,last_message_read:a.threads.last_message.read,last_message_sender_id:a.threads.last_message.sender,last_online:"Invalid date",last_online_at:!1,my_id:MyProfile.webtransfer_id,name_short:"SL",rating:0,spam:!1,type_threads:a.threads.type,unread_count_this_thread:0,updated_at:a.threads.update_at,updated_at_text:"11:28",user_count:a.threads.user_count,users:a.threads.users,webtransfer_id:"5873d832343077901c725cf1"};var b=a;b&&b.last_online_at&&(b.last_online=moment(b.last_online_at,moment.ISO_8601).fromNow(),ractiveComponent.rootApp.set("open_threads",b)),ractiveComponent.rootApp.set("open_threads",a),Messenger.threads.open=a,Messenger.chat.open(a.id,"threads_id")},!0)},push:{registrationId:null,push:null,setup:function(a){Messenger.push.push=PushNotification.init({android:{senderID:a||"290044042540"},browser:{pushServiceURL:"http://push.api.phonegap.com/v1/push"},ios:{alert:"true",badge:"true",sound:"true"},windows:{}}),Messenger.push.push.on("registration",function(a){console.log("registration event: "+a.registrationId),localStorage.getItem("registrationId")!==a.registrationId&&localStorage.setItem("registrationId",a.registrationId),Messenger.push.registrationId=a.registrationId,ractiveComponent.rootApp.set("registrationId",a.registrationId)}),Messenger.push.push.on("error",function(a){console.log("push error = "+a.message)}),Messenger.push.push.on("notification",function(a){if(0==a.additionalData.foreground&&0==a.additionalData.coldstart&&a.additionalData.key_action){var b=a.additionalData.key_action.split(":");switch(b[0]){case"chat":isNaN(+b[1])||Messenger.openChat(!1,+b[1]);break;case"thread":isNaN(+b[1])||Messenger.openChat(!1,!1,+b[1])}}console.log("notification event",arguments)})}},share:function(){var a={message:_chat_e("Скачай Telegraf.Money Messenger со встроенной бесплатной картой VISA/MC и получи бонус $50"),subject:_chat_e("Скачай Telegraf.Money Messenger со встроенной бесплатной картой VISA/MC и получи бонус $50"),url:"https://telegraf.money/?ref="+MyProfile.webtransfer_id,chooserTitle:"Invite friends to Telegraf"};window&&window.plugins&&window.plugins.socialsharing?window.plugins.socialsharing.shareWithOptions(a,function(a){},function(a){swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",title:_chat_e("Ошибка"),type:"error",confirmButtonText:_chat_e("Ok"),cancelButtonText:_chat_e("Отменить"),showCancelButton:!1,text:_chat_e("Не удалось отправить партнерскую ссылку")})}):swal.close()},crypto:{wallets:window.__crypto_wallets||[],add:function(a,b,c,d){if("VDC"===b)return!1;for(var e in Messenger.crypto.wallets)if(Messenger.crypto.wallets[e].address===a&&Messenger.crypto.wallets[e].type===b)return!1;return Messenger.crypto.wallets.push({address:a,type:b,privateKey:c,client:d}),Messenger.crypto.update(a),lsbridge.send("crypto_wallets",Messenger.crypto.wallets),localStorage.setItem("crypto_wallets_db"+localStorage.user_id,JSON.stringify(Messenger.crypto.wallets)),!0},update:function(a){for(var b in Messenger.crypto.wallets)a?Messenger.crypto.wallets[b].address===a&&Crypto.getBalance(Messenger.crypto.wallets[b].address,Messenger.crypto.wallets[b].type,function(a,c,d){for(var e in Messenger.crypto.wallets)Messenger.crypto.wallets[e].address===a&&Messenger.crypto.wallets[e].type===c&&(Messenger.crypto.wallets[b].balance=d);lsbridge.send("crypto_wallets",Messenger.crypto.wallets),localStorage.setItem("crypto_wallets_db"+localStorage.user_id,JSON.stringify(Messenger.crypto.wallets))}):Crypto.getBalance(Messenger.crypto.wallets[b].address,Messenger.crypto.wallets[b].type,function(a,c,d){for(var e in Messenger.crypto.wallets)Messenger.crypto.wallets[e].address===a&&Messenger.crypto.wallets[e].type===c&&(Messenger.crypto.wallets[b].balance=d);lsbridge.send("crypto_wallets",Messenger.crypto.wallets),localStorage.setItem("crypto_wallets_db"+localStorage.user_id,JSON.stringify(Messenger.crypto.wallets))})},remove:function(a,b){for(var c in Messenger.crypto.wallets)if(Messenger.crypto.wallets[c].address===a&&Messenger.crypto.wallets[c].type===b)return Messenger.crypto.wallets[c]=void 0,lsbridge.send("crypto_wallets",Messenger.crypto.wallets),localStorage.setItem("crypto_wallets_db"+localStorage.user_id,JSON.stringify(Messenger.crypto.wallets)),!0;return!1},find:function(a,b){for(var c in Messenger.crypto.wallets)if(Messenger.crypto.wallets[c].address===a&&Messenger.crypto.wallets[c].type===b)return Messenger.crypto.wallets[c];return!1}}};$.fn.extend({animateCss:function(a,b){$(this).addClass("animated "+a).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated "+a),b&&b()})}}),procent=.05,Messenger.on("ComponentsOnRender",function(a){console.log("ComponentsOnRender:"+a)}),window.onpopstate=function(a){location.hash.replace("#","").split("-")[0]&&""!=location.hash.replace("#","").split("-")[0]&&Messenger.setPage(location.hash.replace("#","").split("-")[0],location.hash.replace("#","").split("-")[1],!0),console.log("Messenger.setPage",location.hash.replace("#","").split("-")[0],location.hash.replace("#","").split("-")[1])};var abi=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_disable",type:"bool"}],name:"disableTransfers",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"MiningRewardPerETHBlock",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_amount",type:"uint256"}],name:"ChangeMiningReward",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"standard",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_token",type:"address"},{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"withdrawTokens",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[],name:"acceptOwnership",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"issue",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_amount",type:"uint256"}],name:"destroy",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"transfersEnabled",outputs:[{name:"",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[],name:"TransferMinersReward",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"newOwner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"lastBlockRewarded",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,type:"function"},{inputs:[{name:"_name",type:"string"},{name:"_symbol",type:"string"},{name:"_decimals",type:"uint8"}],payable:!1,type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"_token",type:"address"}],name:"DebitCoinTokenGenesis",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_amount",type:"uint256"}],name:"Issuance",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_amount",type:"uint256"}],name:"Destruction",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_amount",type:"uint256"}],name:"MiningRewardChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"MiningRewardSent",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_prevOwner",type:"address"},{indexed:!1,name:"_newOwner",type:"address"}],name:"OwnerUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"}],_contract_fixed=1e8,_address="0x95408930d6323ac7aa69e6c2cbfe58774d565fa8",contract=!1,Crypto={getBalance:function(a,b,c){"ETH"===b&&c&&c(a,b,(+web3.eth.getBalance(a)/1e18).toFixed(4)),"DBC"===b&&(contract||(contract=web3.eth.contract(abi).at(_address)),c&&c(a,b,(+contract.balanceOf(a)/_contract_fixed).toFixed(2))),"BTC"===b&&c&&c(a,b,(0).toFixed(6))},find:function(a,b){for(var c in Messenger.crypto.wallets)if(Messenger.crypto.wallets[c].address===a&&Messenger.crypto.wallets[c].type===b)return Messenger.crypto.wallets[c];return!1},transferETH:function(a,b){var c=this.find(a.from,"ETH");if(!c)return swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("Не удалось аутентифицировать ваш кошелек")});var d=new ethereumjs.Tx({nonce:ethUtil.intToHex(web3.eth.getTransactionCount(c.address,"pending")),gasPrice:ethUtil.intToHex(1e9*a.gasPrice),gasLimit:ethUtil.intToHex(8e4),to:a.to,from:c.address,value:web3.toHex(web3.toWei(+a.amount,"ether")),chainId:1});d.sign(ethereumjs.Buffer.Buffer(c.privateKey,"hex"));var e=d.serialize();web3.eth.sendRawTransaction("0x"+e.toString("hex"),function(a,c){if(a)return console.error("Error (web3.eth.sendRawTransaction):",a,c),swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("Ошибка отправки транзакции")});console.log(c),b&&b(c)})},transferDBC:function(a,b){var c=this.find(a.from,"DBC");if(!c)return swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("Не удалось аутентифицировать ваш кошелек")});var d=new ethereumjs.Tx({nonce:ethUtil.intToHex(web3.eth.getTransactionCount(c.address,"pending")),gasPrice:ethUtil.intToHex(1e9*a.gasPrice),gasLimit:ethUtil.intToHex(8e4),to:_address,from:c.address,value:"0x00",data:contract.transfer.getData(a.to,+a.amount*_contract_fixed),chainId:1});d.sign(ethereumjs.Buffer.Buffer(c.privateKey,"hex"));var e=d.serialize();web3.eth.sendRawTransaction("0x"+e.toString("hex"),function(a,c){if(a)return console.error("Error (web3.eth.sendRawTransaction):",a,c),swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("Ошибка отправки транзакции")});console.log(c),b&&b(c)})},transferERC20:function(a,b){var c=this.find(a.from,find);if(!c)return swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("Не удалось аутентифицировать ваш кошелек")});var d=new ethereumjs.Tx({nonce:ethUtil.bufferToHex(web3.eth.getTransactionCount(c.address,"pending")),gasPrice:ethUtil.bufferToHex(1e9*a.gasPrice),gasLimit:ethUtil.bufferToHex(8e4),to:a.to,from:c.address,value:web3.toHex(web3.toWei(+a.amount,"ether")),chainId:1});d.sign(ethereumjs.Buffer.Buffer(c.privateKey));var e=d.serialize();web3.eth.sendRawTransaction("0x"+e.toString("hex"),function(a,c){if(a)return console.error("Error (web3.eth.sendRawTransaction):",a,c),swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("Ошибка отправки транзакции")});b&&b(c)})}};