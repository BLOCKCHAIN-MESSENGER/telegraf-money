"use strict";function init_recorder(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||cordova.plugins.iosrtc.getUserMedia,audio_context=new AudioContext,navigator.getUserMedia({audio:!0},function(e){var t=audio_context.createMediaStreamSource(e);audioRecorder=new WebAudioRecorder(t,{workerDir:"plugins/voice/",encoding:"ogg",onEncoderLoading:function(e,t){console.log(" WebAudioRecorder onEncoderLoading")},onEncoderLoaded:function(){console.log("WebAudioRecorder ok loaded")}}),swal.close()},function(e){})}catch(e){console.error("init_recorder",e)}}function trim(e){return e.replace(/\s+/g," ").replace(/(^\s*)|(\s*)$/g,"")}function clearFields(){init_secund=0,clearTimeout(clocktimer),document.getElementById("voice_time_record").innerHTML="00:00.00"}function startTIME(){var e=(new Date).getTime()-startDate.getTime(),t=e%1e3;e-=t,t=Math.floor(t/10);var n=(e=Math.floor(e/1e3))%60;e-=n;var o=(e=Math.floor(e/60))%60;e-=o;var i=(e=Math.floor(e/60))%60;i<10&&(i="0"+i),o<10&&(o="0"+o),n<10&&(n="0"+n),t<10&&(t="0"+t),1==init_secund&&(document.getElementById("voice_time_record").innerHTML=o+":"+n+"."+t),clocktimer=setTimeout("startTIME()",10)}function findTIME(){0==init_secund?(startDate=new Date,startTIME(),init_secund=1):(init_secund=0,clearTimeout(clocktimer))}function init(){procent=.15;var e=function(e){Ractive.getHtml(_path_chat+"templates.html?ver="+_ver).then(function(t){var n=t.split("<!!!>"),o=[],i="";for(var r in n)n[r].length&&(i=(o=n[r].split("<!:!>"))[0],Ractive.components[i]=Ractive.extend({isolated:!1,template:o[1],nameComponents:i,onrender:function(){window.Messenger&&Messenger.event.ComponentsOnRender&&Messenger.event.ComponentsOnRender(this.nameComponents),this.on("*",function(e,t,n,o){window.Messenger&&e&&e.name&&Messenger.event[e.name]&&Messenger.event[e.name](t,n,o)})}}));procent+=.1,e&&e()})},t=function(e,t,n){(t=t||{cnt:0,afterlast:function(){}}).cnt++;var o;if("string"==typeof e?e={name:o=e}:o=e.name,!o)throw new Error("You have to specify a file/name Ractive.requireElement");var i=e.src||o,r=o=o.split("/");o="wtc-"+o.join("-");var a=r[r.length-1].capitalizeFirstLetter();for(var c in r)r[c]=r[c].capitalizeFirstLetter();r="Wtc"+r.join(""),"Auth"==a?(e.element="#ractive_chat_module2",$("#ractive_chat_module2").css("display","block"),$("#ractive_chat_module").css("display","none")):($("#ractive_chat_module2").css("display","none"),$("#ractive_chat_module").css("display","block")),Ractive.components[o]?0>=--t.cnt&&!t.ran&&(t.ran=!0,t.afterlast(o)):(Ractive.require(_path_chat+i+"/"+a+".css"),Ractive.getHtml(_path_chat+i+"/"+a+".html").then(function(n){Ractive.DEBUG&&console.log("Element "+o+" loaded"),"App"==a?ractiveComponent.rootApp=new Ractive({el:"#ractive_chat_module",template:n,data:{_e:_chat_e,notificationCount:0,MyProfile:MyProfile,_path_src:_path_src},oninit:function(){console.log("#ractive_chat_module init!")},oncomplete:function(){Ractive.require(_path_chat+i+"/"+a+".element.js").then(function(){Ractive.components[o]=window[r].extend({template:n}),ractiveComponent[r]=new window[r],t.cnt--,setTimeout(function(){0>=t.cnt&&!t.ran&&(t.ran=!0,t.afterlast())},1)})}}):ractiveComponent[o+"App"]=new Ractive({el:e.element,template:n,data:{_e:_chat_e,MyProfile:MyProfile,_path_src:_path_src},oninit:function(){this.on("setPage",function(e,t,n,o){window.Messenger&&Messenger.event[e.name]&&Messenger.event[e.name](t,n,o)})},oncomplete:function(){Ractive.require(_path_chat+i+"/"+a+".element.js?ver="+_ver).then(function(){Ractive.components[o]=window[r].extend({template:n}),ractiveComponent[r]=new window[r],t.cnt--,setTimeout(function(){0>=t.cnt&&!t.ran&&(t.ran=!0,t.afterlast(o))},1)})}})}))};if(window.requireElement=t,param_url_this().vip_id)e(function(){t({name:"App"})});else{var n=param_url_this(),o=new XMLHttpRequest;o.open("GET","https://telegraf.money/api/v1/?method=public_test_auth_token&api_secret=&api_webtransfer_id=&token="+encodeURIComponent(n.token)+"&user_id="+n.user_id,!0),o.send(),o.onreadystatechange=function(){if(4==this.readyState){if(200==this.status){var n=JSON.parse(this.responseText);if(1==n.success&&"success"==n.status)return localStorage.setItem("authToken","ok"),e(function(){t({name:"App"})}),!0}localStorage.setItem("authToken","err"),localStorage.getItem("installTime")&&localStorage.getItem("user_id")&&localStorage.getItem("uuid")?e(function(){t({name:"App"}),procent=.25}):(t({name:"Auth",element:"#ractive_chat_module"}),procent=.25)}}}}function setLang(e){localStorage.setItem("lang",e),location.reload()}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_path_chat="src/views/",_path_src="./src/",_ver="0.0.0",_e=_chat_e,_room_wt="webtransfer.com",ractiveComponent={},MyProfile=localStorage.getItem("MyProfile");if(MyProfile)if(/^[\],:{}\s]*$/.test(MyProfile.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))try{MyProfile=JSON.parse(MyProfile)}catch(e){MyProfile=!1}else MyProfile=!1;var audio_context,audioRecorder,init_secund=0,startDate,clocktimer;String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};