var WtcAffiliates=Ractive.extend({data:function(){return{}},oninit:function(){console.log("Affiliates.oninit !"),ractiveComponent["wtc-AffiliatesApp"].set("MyProfile",MyProfile),ractiveComponent["wtc-AffiliatesApp"].set("tabPage",Messenger.body.Affiliates.tabPage),Messenger.finance.callback_save(function(t,e){ractiveComponent["wtc-AffiliatesApp"].set("finance_cards",t),ractiveComponent["wtc-AffiliatesApp"].set("finance_cards_load",!0)}),"my"===ractiveComponent["wtc-AffiliatesApp"].get("tabPage")&&API("get_affiliates_referals",{},!1,function(t){ractiveComponent["wtc-AffiliatesApp"].set("partners_finish",!0),ractiveComponent["wtc-AffiliatesApp"].set("partners",t.data.referals)},!0),"profit"===ractiveComponent["wtc-AffiliatesApp"].get("tabPage")&&API("get_affiliates_tx",{},!1,function(t){if(ractiveComponent["wtc-AffiliatesApp"].set("profit_load",!0),t.error)return noty({text:"<strong>"+_chat_e("Ошибка!")+"</strong><br>"+t.error,type:"error",theme:"metroui",layout:"topCenter",timeout:4e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}});ractiveComponent["wtc-AffiliatesApp"].set("profit",t.data.tx)},!0),setTimeout(function(){$("#cards_my").styler().trigger("refresh"),$(".__nano").nanoScroller()},10)},onrender:function(){console.log("Affiliates.onrender !")},oncomplete:function(){console.log("Affiliates.oncomplete !")}});API("get_affiliates_data",{},!1,function(t){if(t.error)return noty({text:"<strong>"+_chat_e("Ошибка!")+"</strong><br>"+result.error,type:"error",theme:"metroui",layout:"topCenter",timeout:4e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}});ractiveComponent["wtc-AffiliatesApp"].set("affiliates_data",t.data)},!0),ractiveComponent["wtc-AffiliatesApp"].on("add_share",function(t,e){swal({title:_chat_e("Добавить партнера"),customClass:"swal-telegraf-modal",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Поделиться"),cancelButtonText:_chat_e("Закрыть"),showCancelButton:!0,html:_chat_e("Ваша реферальная ссылка: ")+'<br><div class="select-form"><input class="form-control" value="https://telegraf.money/?invite='+ractiveComponent["wtc-AffiliatesApp"].get("affiliates_data").invitation+'" ></div><br><span style="    font-size: 16px;">'+_chat_e("Приглашайте ваших друзей в Telegraf.Money и получайте % на ваш счет за каждого из них. Ваши друзья также получат бонус, зарегистрировавшись по вашей ссылке.")+"</span>"}).then(function(){Messenger.share()})}),ractiveComponent["wtc-AffiliatesApp"].on("addPartner",function(t,e){swal({title:_chat_e("Добавить партнера"),customClass:"swal-telegraf-modal",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Поделиться"),cancelButtonText:_chat_e("Закрыть"),showCancelButton:!0,html:_chat_e("Ваша реферальная ссылка: ")+'<br><div class="select-form"><input class="form-control" value="https://telegraf.money/?invite='+ractiveComponent["wtc-AffiliatesApp"].get("affiliates_data").invitation+'" ></div><br><span style="    font-size: 16px;">'+_chat_e("Приглашайте ваших друзей в Telegraf.Money и получайте % на ваш счет за каждого из них. Ваши друзья также получат бонус, зарегистрировавшись по вашей ссылке.")+"</span>"}).then(function(){Messenger.share()})});