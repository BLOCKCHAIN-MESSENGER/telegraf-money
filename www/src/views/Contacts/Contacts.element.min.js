var WtcContacts=Ractive.extend({oninit:function(){ractiveComponent["wtc-ContactsApp"].set("MyProfile",MyProfile),ractiveComponent["wtc-ContactsApp"].set("search_text",""),Messenger.friends.callback_save(function(t){ractiveComponent["wtc-ContactsApp"].set("friends",t),ractiveComponent["wtc-ContactsApp"].set("friends_finish",!0)}),Messenger.partners.callback_save(function(t){ractiveComponent["wtc-ContactsApp"].set("partners",t),ractiveComponent["wtc-ContactsApp"].set("partners_finish",!0)}),ractiveComponent["wtc-ContactsApp"].set("loans_finish",!0),ractiveComponent["wtc-ContactsApp"].set("credit_finish",!0)},onrender:function(){console.log("WebtransferChatContacts.onrender !")},oncomplete:function(){console.log("WebtransferChatContacts.oncomplete !")}});ractiveComponent["wtc-ContactsApp"].set("tab","partners"),ractiveComponent["wtc-ContactsApp"].on("SetTabContacts",function(t,n){ractiveComponent["wtc-ContactsApp"].set("tab",n)}),ractiveComponent["wtc-ContactsApp"].on("addPartner",function(t,n){swal({title:_chat_e("Добавить партнера"),customClass:"swal-telegraf-modal",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Поделиться"),cancelButtonText:_chat_e("Закрыть"),showCancelButton:!0,html:_chat_e("Ваша реферальная ссылка: ")+'<br><div class="select-form"><input class="form-control" value="https://telegraf.money/?ref='+MyProfile.webtransfer_id+'" disabled="disabled"></div><br>'+_chat_e("Приглашайте ваших друзей в Telegraf.Money и получайте по $50 кредитным бонусом на вашу карту за каждого из них. Ваши друзья также получат по $50, зарегистрировавшись по вашей ссылке.")}).then(function(){Messenger.share()})}),ractiveComponent["wtc-ContactsApp"].on("errorAvatar",function(t,n){Messenger.contacts.data[n].avatar_path=!1,ractiveComponent["wtc-ContactsApp"].set("contacts",Messenger.contacts.data)}),ractiveComponent["wtc-ContactsApp"].on("openChats",function(t,n){Messenger.openChat(Messenger[ractiveComponent["wtc-ContactsApp"].get("tab")].data[n],!1)}),ractiveComponent["wtc-ContactsApp"].on("setType",function(t,n){ractiveComponent["wtc-ContactsApp"].set("tab",n)}),ractiveComponent["wtc-ContactsApp"].on("addfriends",function(t,n){swal({title:_chat_e("Добавить контакт"),html:_chat_e("Введите ID пользователя которого ходите добавить к себе в список друзей "),input:"text",customClass:"swal-telegraf-modal select-form",inputClass:"form-control",inputPlaceholder:"User ID",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Найти"),cancelButtonText:_chat_e("Отмена"),showCancelButton:!0,inputValidator:function(t){return new Promise(function(n,e){var o=setTimeout(function(){e(_chat_e("Ошибка сервер недоступен."))},1e4);if(!t||""==t||"0"==t)return clearTimeout(o),e(_chat_e("Ошибка поле ID должено быть заполнено!"));API("userInfo",{webtransfer_id:t},function(n){n.success?(clearTimeout(o),swal({title:_chat_e("Добавить в друзья?"),type:"question",customClass:"swal-telegraf-modal",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Добавить"),cancelButtonText:_chat_e("Отмена"),showCancelButton:!0,html:"<strong>"+n.user.name_first+" "+n.user.name_last+" ("+n.user.webtransfer_id+") </strong>"}).then(function(){API("addFriends",{friend_id:n.user.webtransfer_id},function(t){Messenger.friends.update(),t.success?swal({title:_chat_e("Успешно"),type:"success",customClass:"swal-telegraf-modal",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",showCancelButton:!1,html:_chat_e("Пользователь добавлен в список ваших друзей.")}):swal({title:_chat_e("Ошибка"),type:"error",customClass:"swal-telegraf-modal",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",showCancelButton:!1,html:t.error})})})):(clearTimeout(o),e(_chat_e("Ошибка пользователь с ID: ")+t+_chat_e(". Не существует в системе")),e(_chat_e("Пользователь уже есть в списке ваших друзей")))},!0)})}})}),ractiveComponent["wtc-ContactsApp"].on("search",function(t){ractiveComponent["wtc-ContactsApp"].set("search_text",t.node.value)});