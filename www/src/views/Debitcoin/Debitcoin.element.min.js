function transfer_coin(t,e,n){if(!e.from)return n&&n(null,{error:"param from undefined",success:!1,code:500,status:"error"});if(!e.to)return n&&n(null,{error:"param to undefined",success:!1,code:500,status:"error"});if(!e.amount)return n&&n(null,{error:"param amount undefined",success:!1,code:500,status:"error"});isNaN(+e.amount)&&n&&n(null,{error:"amount in Nan",error_obj:{param:"amount",value:e.amount},success:!1}),e.type||(e.type="DBC"),e.gasPrice&&!isNaN(e.gasPrice)||(e.gasPrice=21),+e.gasPrice>30&&(e.gasPrice=21),+e.gasPrice<0&&(e.gasPrice=21),e.type=e.type.toUpperCase();var o="DBC";if("ETH"===e.type&&(e.type="ETH",o="ETH"),"BTC"===e.type&&(e.type="BTC",o="BTC"),"DBC"===e.type&&(e.type="ETH",o="DBC"),"VDC"===e.type&&(e.type="ETH",o="DBC"),"ETH"!=e.type&&"BTC"!=e.type)return n&&n(null,{error:"param.type dont support",success:!1});if("ETH"===o){if(!web3.isAddress(e.to))return n&&n(null,{error:"The address you entered is not an address of ETH Wallet",error_obj:{address:e.to},success:!1});if(!util.isValidAddress(e.to))return n&&n(null,{error:"The address you entered is not an address of ETH Wallet",error_obj:{address:e.to},success:!1});if(!web3.isAddress(e.from))return n&&n(null,{error:"The address you entered is not an address of ETH Wallet (sender)",error_obj:{address:e.to},success:!1});if(!ethUtil.isValidAddress(e.from))return n&&n(null,{error:"The address you entered is not an address of ETH Wallet (sender)",error_obj:{address:e.to},success:!1});var a=web3.eth.getTransactionCount(e.from,"pending"),c=+(+web3.eth.getBalance(e.from)/1e18).toFixed(8);if(c<(8e4*e.gasPrice/1e9).toFixed(9))return n&&n(null,{error:"Тot enough money ETH you wallet to pay for gas. min balance:"+(8e4*e.gasPrice/1e9).toFixed(9),error_code:1155121,error_obj:{address:e.from,eth:c,minimal:(8e4*e.gasPrice/1e9).toFixed(9)},success:!1});var r=new Buffer(e.PrivateKey,"hex"),i=ethUtil.bufferToHex(1e9*e.gasPrice),s=ethUtil.bufferToHex(8e4),l=ethUtil.bufferToHex(a),p=new Tx({nonce:l,gasPrice:i,gasLimit:s,to:e.to,from:e.from,value:web3.toHex(web3.toWei(+e.amount,"ether")),chainId:1});p.sign(r);var d=p.serialize();web3.eth.sendRawTransaction("0x"+d.toString("hex"),function(t,e){t?(console.log("Error sendRawTransaction:",t),n&&n(null,{error:"Error ETH Geth server please try latter",error_code:500500,error_obj:t,success:!1})):n&&n(null,{txHash:e,success:!0})})}}var contract=web3.eth.contract(abi).at(_address),WtcDebitcoin=Ractive.extend({oninit:function(){console.log("Debitcoin.oninit !"),window.__crypto_wallet_dbc&&"object"==typeof window.__crypto_wallet_dbc&&window.__crypto_wallet_dbc.wallet?(ractiveComponent["wtc-DebitcoinApp"].set("debit_token",Messenger.finance.crypto_wallet_dbc),ractiveComponent["wtc-DebitcoinApp"].set("finance_debit_coin_gold",Messenger.finance.crypto_wallet_dbc.wallet.balance.dbc),ractiveComponent["wtc-DebitcoinApp"].set("finance_eth",Messenger.finance.crypto_wallet_dbc.wallet.balance.eth),ractiveComponent["wtc-DebitcoinApp"].set("finance_ethusd",Messenger.finance.crypto_wallet_dbc.wallet.balance.ethusd)):(ractiveComponent["wtc-DebitcoinApp"].set("debit_token.wallet.address","Loading..."),ractiveComponent["wtc-DebitcoinApp"].set("finance_debit_coin_gold","...")),ractiveComponent["wtc-DebitcoinApp"].set("MyProfile",MyProfile),ractiveComponent["wtc-DebitcoinApp"].set("btc_finance_btc","..."),ractiveComponent["wtc-DebitcoinApp"].set("eth_finance_eth","..."),ractiveComponent["wtc-DebitcoinApp"].set("sub_tab","wallet"),ractiveComponent["wtc-DebitcoinApp"].set("showPrivate_",!1),ractiveComponent["wtc-DebitcoinApp"].set("eth_status",!0),ractiveComponent["wtc-DebitcoinApp"].set("cryptoAccount",!1);var t=ractiveComponent["wtc-DebitcoinApp"].get("tab");if(("gold"===t||"eth"===t)&&localStorage.getItem("installTime")&&"crypto.wallet.eth.auth"===localStorage.getItem("installTime")){ractiveComponent["wtc-DebitcoinApp"].set("cryptoAccount",!0);var e=localStorage.getItem("walletPrivateKey"),n=keythereum.privateKeyToAddress(e),o={wallet:{address:n,balance:{eth:+(+web3.eth.getBalance(n)/1e18).toFixed(8),ethusd:0,dbc:(+contract.balanceOf(n)/_contract_fixed).toFixed(2)}}};ractiveComponent["wtc-DebitcoinApp"].set("debit_token",o),ractiveComponent["wtc-DebitcoinApp"].set("finance_debit_coin_gold",o.wallet.balance.dbc),$.ajax({url:"https://api.coinmarketcap.com/v1/ticker/ethereum/",type:"get",success:function(t){try{o.wallet.balance.ethusd=(o.wallet.balance.eth*t[0].price_usd).toFixed(2),ractiveComponent["wtc-DebitcoinApp"].set("finance_ethusd",o.wallet.balance.ethusd)}catch(t){console.error("ERROR parse coinmarketcap",t)}}}),ractiveComponent["wtc-DebitcoinApp"].set("finance_eth",o.wallet.balance.eth),ractiveComponent["wtc-DebitcoinApp"].set("finance_ethusd",o.wallet.balance.ethusd)}Messenger.auth_action.call_wait_auth(function(){if("gold"===t||"eth"===t)if(localStorage.getItem("installTime")&&"crypto.wallet.eth.auth"===localStorage.getItem("installTime")){ractiveComponent["wtc-DebitcoinApp"].set("cryptoAccount",!0);var e=localStorage.getItem("walletPrivateKey"),n=keythereum.privateKeyToAddress(e),o={wallet:{address:n,balance:{eth:+(+web3.eth.getBalance(n)/1e18).toFixed(8),ethusd:0,dbc:(+contract.balanceOf(n)/_contract_fixed).toFixed(2)}}};ractiveComponent["wtc-DebitcoinApp"].set("debit_token",o),ractiveComponent["wtc-DebitcoinApp"].set("finance_debit_coin_gold",o.wallet.balance.dbc),$.ajax({url:"https://api.coinmarketcap.com/v1/ticker/ethereum/",type:"get",success:function(t){try{o.wallet.balance.ethusd=(o.wallet.balance.eth*t[0].price_usd).toFixed(2),ractiveComponent["wtc-DebitcoinApp"].set("finance_ethusd",o.wallet.balance.ethusd)}catch(t){console.error("ERROR parse coinmarketcap",t)}}}),ractiveComponent["wtc-DebitcoinApp"].set("finance_eth",o.wallet.balance.eth),ractiveComponent["wtc-DebitcoinApp"].set("finance_ethusd",o.wallet.balance.ethusd),API("getPartnerTxDebitCoin",{},!1,function(t){t.partner&&t.partner[0]&&t.partner[0].referal||(t.partner=[{referal:10}]);var e=0;for(var n in t.txes){t.txes[n].period&&1!=+t.txes[n].period?2==+t.txes[n].period?.1743:3==+t.txes[n].period?.4324:4==+t.txes[n].period?.7533234:5==+t.txes[n].period?.6:6==+t.txes[n].period?.75:7==+t.txes[n].period?.6:1:.1248;var o=moment(t.txes[n].update_at),a=o.format("DD.MM.YYYY"),c=o.format("HH:mm");t.txes[n].date=a,t.txes[n].time=c,t.txes[n].partner_profit=0,"1"===t.txes[n].pay_status&&(t.txes[n].partner_profit=+(+t.txes[n].dbc/100*+t.partner[0].referal).toFixed(2)),e+=t.txes[n].partner_profit,t.txes[n].type_="+"}ractiveComponent["wtc-DebitcoinApp"].set("transactions_partner",t.txes),ractiveComponent["wtc-DebitcoinApp"].set("total_proff",e.toFixed(2)),ractiveComponent["wtc-DebitcoinApp"].set("transactions_partner_info",t.partner[0])})}else API("eth_status",{},!1,function(t){ractiveComponent["wtc-DebitcoinApp"].set("eth_status_dev",t.eth_status_dev)}),Messenger.finance.callback_save(function(t,e,n,o){ractiveComponent["wtc-DebitcoinApp"].set("debit_token",Messenger.finance.crypto_wallet_dbc),ractiveComponent["wtc-DebitcoinApp"].set("finance_debit_coin_gold",Messenger.finance.crypto_wallet_dbc.wallet.balance.dbc),ractiveComponent["wtc-DebitcoinApp"].set("finance_eth",Messenger.finance.crypto_wallet_dbc.wallet.balance.eth),ractiveComponent["wtc-DebitcoinApp"].set("finance_ethusd",Messenger.finance.crypto_wallet_dbc.wallet.balance.ethusd),o&&o.wallet&&ractiveComponent["wtc-DebitcoinApp"].set("finance_debit_coin_gold_virtual",o.wallet["debit-coin-gold"])});"btc"===t&&(API("wallet_coin",{type:"BTC"},!1,function(t){if(t.error)return swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",title:_chat_e("Уппс...")+", "+t.err.code,type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:"Error:"+t.error});ractiveComponent["wtc-DebitcoinApp"].set("btc_debit_token",t),ractiveComponent["wtc-DebitcoinApp"].set("btc_finance_debit_coin_gold",t.wallet.balance.dbc),ractiveComponent["wtc-DebitcoinApp"].set("btc_finance_btc",t.wallet.balance.btc),ractiveComponent["wtc-DebitcoinApp"].set("btc_finance_btcusd",t.wallet.balance.btcusd)},!0),Messenger.finance.callback_save(function(t,e,n,o){o&&o.wallet&&ractiveComponent["wtc-DebitcoinApp"].set("finance_debit_coin_gold_virtual",o.wallet["debit-coin-gold"])})),Messenger.finance.callback_save(function(t,e,n,o){t&&0!=t.length||(t=!1),console.log(arguments),ractiveComponent["wtc-DebitcoinApp"].set("finance_cards",t),o&&(ractiveComponent["wtc-DebitcoinApp"].set("finance_debit_coin_silver",o.wallet["debit-coin"]),ractiveComponent["wtc-DebitcoinApp"].set("finance_cards_load",!0))})})},onrender:function(){console.log("Debitcoin.onrender !")},oncomplete:function(){console.log("Debitcoin.oncomplete !")}});Messenger.auth_action.call_wait_auth(function(){function t(t){return{1:3,2:9,3:15,4:21,5:30,6:40}[t]}setInterval(function(){API("wallet_coin",{type:"DBC"},!1,function(t){ractiveComponent["wtc-DebitcoinApp"].set("debit_token",t),ractiveComponent["wtc-DebitcoinApp"].set("finance_debit_coin_gold",t.wallet.balance.dbc),ractiveComponent["wtc-DebitcoinApp"].set("finance_eth",t.wallet.balance.eth),ractiveComponent["wtc-DebitcoinApp"].set("finance_ethusd",t.wallet.balance.ethusd)},!0)},5e3);var e=new Clipboard("#basic-addon2299"),n=new Clipboard("#basic-addon22"),o=new Clipboard("#basic-addon222"),a=new Clipboard("#basic-addon22233");e.on("success",function(t){noty({text:_chat_e("Успешно!")+"<br>"+_chat_e("Адрес скопирован в буфер обмена."),type:"success",theme:"metroui",layout:"topCenter",timeout:4e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}}),t.clearSelection()}),e.on("error",function(t){window.prompt(_chat_e("Скопировать в буфер обмена: Ctrl + C, Enter"),$("#address-wallet-inp-get").val())}),n.on("success",function(t){noty({text:_chat_e("Успешно!")+"<br>"+_chat_e("Адрес скопирован в буфер обмена."),type:"success",theme:"metroui",layout:"topCenter",timeout:4e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}}),t.clearSelection()}),n.on("error",function(t){window.prompt(_chat_e("Скопировать в буфер обмена: Ctrl + C, Enter"),$("#address-wallet-inp-get").val())}),o.on("success",function(t){noty({text:_chat_e("Успешно!")+"<br> Partner "+_chat_e("Адрес скопирован в буфер обмена."),type:"success",theme:"metroui",layout:"topCenter",timeout:4e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}}),t.clearSelection()}),o.on("error",function(t){window.prompt(_chat_e("Скопировать в буфер обмена: Ctrl + C, Enter"),$("#address-wallet-inp-get").val())}),a.on("success",function(t){noty({text:_chat_e("Успешно!")+"<br> "+_chat_e("Адрес скопирован в буфер обмена."),type:"success",theme:"metroui",layout:"topCenter",timeout:4e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}}),t.clearSelection()}),a.on("error",function(t){window.prompt(_chat_e("Скопировать в буфер обмена: Ctrl + C, Enter"),$("#address-wallet-inp-get").val())}),ractiveComponent["wtc-DebitcoinApp"].set("tab","gold"),ractiveComponent["wtc-DebitcoinApp"].on("openModal",function(e,n){"send"==n&&($("#cardModal2").modal(),$("#ex21").bootstrapSlider({ticks_toolti:!0,formatter:function(e){return t(e)+" Gwei"}}),setTimeout(function(){$("#ex21").bootstrapSlider("refresh")},501),setTimeout(function(){$("#ex21").bootstrapSlider("refresh")},1500)),"virualdbc"==n&&swal({title:_chat_e("Подтверждение"),type:"question",customClass:"swal-telegraf-modal select-form",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Да"),cancelButtonText:_chat_e("Отменить"),showCancelButton:!0,text:_chat_e("Вы действительно хотите перевести:")+" <strong>"+ractiveComponent["wtc-DebitcoinApp"].get("finance_debit_coin_gold_virtual")+" eDBC</strong><br>"+_chat_e("На основной адрес DBC"),showLoaderOnConfirm:!0,preConfirm:function(){swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Создание перевода DEBIT Coin..."),closeOnConfirm:!1,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!0,showCancelButton:!1,showLoaderOnConfirm:!0,text:"",preConfirm:function(){return new Promise(function(t,e){setTimeout(function(){t()},3e4)})}}),swal.showLoading(),API("eDBC_transfrer_DBC",{amount:ractiveComponent["wtc-DebitcoinApp"].get("finance_debit_coin_gold_virtual")},!1,function(t){return Messenger.finance.update(),t.error?swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:"Error:"+t.error}):swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",title:_chat_e("Успешно"),type:"success",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("Перевод отправлен в обработку txHash:")+" "+t.txHash})},!0)}}),"get"==n&&($("#cardModal").modal(),$("#buy_debitcoin").css("display","block"),document.getElementById("qr_code_vdc2").innerHTML="",new QRCode(document.getElementById("qr_code_vdc2"),{text:ractiveComponent["wtc-DebitcoinApp"].get("debit_token").wallet.address,width:170,height:170,colorDark:"#000000",colorLight:"#fff",correctLevel:QRCode.CorrectLevel.L})),"getbtc"==n&&($("#cardModal").modal(),$("#buy_debitcoin").css("display","none"),document.getElementById("qr_code_vdc2").innerHTML="",new QRCode(document.getElementById("qr_code_vdc2"),{text:ractiveComponent["wtc-DebitcoinApp"].get("btc_debit_token").wallet.address,width:170,height:170,colorDark:"#000000",colorLight:"#fff",correctLevel:QRCode.CorrectLevel.L}))}),ractiveComponent["wtc-DebitcoinApp"].on("sendCoin",function(e,n){var o="DBC",a="</strong> GasPrice: <strong>"+t($("#ex21").bootstrapSlider("getValue"))+" Gwei</strong>";if("eth"===n&&(o="ETH"),"btc"===n&&(a="</strong> Fee: <strong>0.0001 BTC</strong>",o="BTC"),$("#amount-wallet-inp").val()<=0||isNaN($("#amount-wallet-inp").val()))return noty({text:_chat_e("Ошибка:")+" <br>"+_chat_e("Неверная сумма перевода"),type:"error",theme:"metroui",layout:"topCenter",timeout:4e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}});var c,r=ractiveComponent["wtc-DebitcoinApp"].get("tab");if("gold"===r&&(c=ractiveComponent["wtc-DebitcoinApp"].get("debit_token").wallet.address),"eth"===r&&(c=ractiveComponent["wtc-DebitcoinApp"].get("debit_token").wallet.address),"btc"===r&&(c=ractiveComponent["wtc-DebitcoinApp"].get("btc_debit_token").wallet.address),""===$("#address-wallet-inp").val()||$("#address-wallet-inp").val().length<10||$("#address-wallet-inp").val().length>60)return noty({text:_chat_e("Ошибка:")+" <br>"+_chat_e("Неверный адрес кошелька"),type:"error",theme:"metroui",layout:"topCenter",timeout:4e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}});$("#cardModal2").modal("hide"),swal({title:_chat_e("Подтверждение"),type:"question",customClass:"swal-telegraf-modal select-form",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Да"),cancelButtonText:_chat_e("Отменить"),showCancelButton:!0,text:_chat_e("Вы действительно хотите перевести:")+" <strong>"+$("#amount-wallet-inp").val()+" "+o+"</strong><br>"+_chat_e("На адрес:")+" <strong>"+$("#address-wallet-inp").val()+a,showLoaderOnConfirm:!0,preConfirm:function(){swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Создание перевода..."),closeOnConfirm:!1,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!0,showCancelButton:!1,showLoaderOnConfirm:!0,text:"",preConfirm:function(){return new Promise(function(t,e){setTimeout(function(){t()},3e4)})}}),swal.showLoading(),API("transfer_coin",{from:c,to:$("#address-wallet-inp").val(),type:o,gasPrice:t($("#ex21").bootstrapSlider("getValue")),amount:$("#amount-wallet-inp").val()},!1,function(t){if(t.error)return 1155121===t.error_code?(swal.close(),$("#cardModal3").modal("show"),!1):swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:"Error:"+t.error});var e="https://etherscan.io/tx/";return"BTC"===t.type&&(e="https://blockchain.info/tx/"),swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",title:_chat_e("Успешно"),type:"success",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("Перевод отправлен в обработку txHash:")+' <a href="'+e+t.txHash+'" target="_blank">'+t.txHash+"</a>"})},!0)}})})}),ractiveComponent["wtc-DebitcoinApp"].on("barcodeScanner",function(t,e){cordova.plugins.barcodeScanner.scan(function(t){if(!(t&&t.text&&t.text.length<10&&t.text.length>=60))return swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("QR-Код не является адресом кошелька")});$("#address-wallet-inp").val(t.text),$("#address-wallet-i").css("color","#00f317")},function(t){return swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("Ошибка QR-Кода")})},{preferFrontCamera:!1,showFlipCameraButton:!0,showTorchButton:!0,torchOn:!1,prompt:_chat_e("Поместите QR-Код внутри области сканирования"),resultDisplayDuration:500,formats:"QR_CODE",orientation:"landscape",disableAnimations:!1,disableSuccessBeep:!1})}),ractiveComponent["wtc-DebitcoinApp"].on("setSubTab",function(t,e){ractiveComponent["wtc-DebitcoinApp"].set("sub_tab",e);var n,o,a=ractiveComponent["wtc-DebitcoinApp"].get("tab");"gold"===a&&(n="DBC",o=ractiveComponent["wtc-DebitcoinApp"].get("debit_token").wallet.address),"eth"===a&&(n="ETH",o=ractiveComponent["wtc-DebitcoinApp"].get("debit_token").wallet.address),"btc"===a&&(n="BTC",o=ractiveComponent["wtc-DebitcoinApp"].get("btc_debit_token").wallet.address),"tx"==e&&(ractiveComponent["wtc-DebitcoinApp"].set("transactions_load",!1),API("tx_crypto",{address:o,count:40,page:1,type:n},!1,function(t){if(t.error)return noty({text:_chat_e("Ошибка:")+" <br>"+t.error,type:"error",theme:"metroui",layout:"topCenter",timeout:4e3,progressBar:!0,animation:{open:"animated fadeInDown",close:"animated fadeOutUp"}});if("DBC"===t.type){for(var e in t.tx){var n=(c=moment(new Date(1e3*t.tx[e].timestamp))).format("DD.MM.YYYY"),a=c.format("HH:mm");t.tx[e].date=n,t.tx[e].time=a,t.tx[e].type_="+",t.tx[e].from==o&&(t.tx[e].type_="-")}ractiveComponent["wtc-DebitcoinApp"].set("transactions"+t.type,t.tx),ractiveComponent["wtc-DebitcoinApp"].set("transactions_load"+t.type,!0)}if("ETH"===t.type){for(var e in t.tx){var n=(c=moment(new Date(1e3*t.tx[e].timestamp))).format("DD.MM.YYYY"),a=c.format("HH:mm");t.tx[e].date=n,t.tx[e].time=a,t.tx[e].type_="+",t.tx[e].from==o&&(t.tx[e].type_="-")}ractiveComponent["wtc-DebitcoinApp"].set("transactions"+t.type,t.tx),ractiveComponent["wtc-DebitcoinApp"].set("transactions_load"+t.type,!0)}if("BTC"===t.type){for(var e in t.tx){var c=moment(new Date(1*t.tx[e].time)),n=c.format("DD.MM.YYYY"),a=c.format("HH:mm");if(t.tx[e].date=n,t.tx[e].time=a,t.tx[e].type_="+",t.tx[e].value=t.tx[e].result,0==+t.tx[e].result){for(var r in t.tx[e].inputs)t.tx[e].value+=-t.tx[e].inputs[r].prev_out.value;t.tx[e].type_="-"}t.tx[e].value=-t.tx[e].value/1e8}ractiveComponent["wtc-DebitcoinApp"].set("transactions"+t.type,t.tx),ractiveComponent["wtc-DebitcoinApp"].set("transactions_load"+t.type,!0)}}))}),ractiveComponent["wtc-DebitcoinApp"].on("showPrivate",function(t,e){if(e||(e="DBC"),("DBC"===e||"ETH"===e)&&localStorage.getItem("installTime")&&"crypto.wallet.eth.auth"===localStorage.getItem("installTime"))return ractiveComponent["wtc-DebitcoinApp"].set("showPrivate_",!ractiveComponent["wtc-DebitcoinApp"].get("showPrivate_")),ractiveComponent["wtc-DebitcoinApp"].set("debit_tokenPrivateKey",localStorage.getItem("walletPrivateKey"));ractiveComponent["wtc-DebitcoinApp"].get("showPrivate_")?(ractiveComponent["wtc-DebitcoinApp"].set("showPrivate_",!ractiveComponent["wtc-DebitcoinApp"].get("showPrivate_")),ractiveComponent["wtc-DebitcoinApp"].set("debit_tokenPrivateKey",!1)):(swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Загрузка..."),closeOnConfirm:!1,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!0,showCancelButton:!1,showLoaderOnConfirm:!0,text:"",preConfirm:function(){return new Promise(function(t,e){setTimeout(function(){t()},3e4)})}}),swal.showLoading(),API("wallet_coin",{type:e,secure:!0},!1,function(t){ractiveComponent["wtc-DebitcoinApp"].set("debit_tokenPrivateKey",t.wallet.PrivateKey),ractiveComponent["wtc-DebitcoinApp"].set("debit_tokenPrivateKey_2",t.wallet.passwordKeystore),ractiveComponent["wtc-DebitcoinApp"].set("showPrivate_",!ractiveComponent["wtc-DebitcoinApp"].get("showPrivate_")),setTimeout(swal.close,300)},!0))}),ractiveComponent["wtc-DebitcoinApp"].on("keyStoreFile",function(t){swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Загрузка..."),closeOnConfirm:!1,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!0,showCancelButton:!1,showLoaderOnConfirm:!0,text:_chat_e("Подготовка к скачиванию Keystore File"),preConfirm:function(){return new Promise(function(t,e){setTimeout(function(){t()},1e4)})}}),swal.showLoading(),API("wallet_coin",{type:"DBC",secure:!0},!1,function(t){$.fileDownload(t.wallet.KeystoreURL).fail(function(){return swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",title:_chat_e("Уппс..."),type:"error",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:"File download failed!"})}),setTimeout(function(){return swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",title:"Keystore File",type:"success",confirmButtonText:_chat_e("Ок"),showCancelButton:!1,text:_chat_e("Пароль:")+" "+t.wallet.passwordKeystore})},200)},!0)}),ractiveComponent["wtc-DebitcoinApp"].set("sub_tab","wallet");