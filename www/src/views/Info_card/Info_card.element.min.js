var WtcInfo_card=Ractive.extend({data:function(){return{}},oninit:function(){console.log("Info_card.oninit !"),ractiveComponent["wtc-Info_cardApp"].set("MyProfile",MyProfile),ractiveComponent["wtc-Info_cardApp"].set("card",scan_card_by_id(Messenger.cardID)),ractiveComponent["wtc-Info_cardApp"].set("card_transactions",[]),ractiveComponent["wtc-Info_cardApp"].set("card_transactions_load",!1),Messenger.finance.callback_save(function(t){ractiveComponent["wtc-Info_cardApp"].set("finance_cards",t),ractiveComponent["wtc-Info_cardApp"].set("finance_cards_load",!0)}),API("get_card_transactions",{card_id:Messenger.cardID,count:40,page:1},!1,function(t){for(var n in t.result){var e=moment(t.result[n].tranDate,moment.ISO_8601),o=e.format("DD.MM.YYYY"),a=e.format("HH:mm");t.result[n].date=o,t.result[n].time=a}ractiveComponent["wtc-Info_cardApp"].set("card_transactions",t.result),ractiveComponent["wtc-Info_cardApp"].set("card_transactions_load",!0),$(".__nano").nanoScroller()},!0),$(".__nano").nanoScroller()},onrender:function(){console.log("Info_card.onrender !")},oncomplete:function(){console.log("Info_card.oncomplete !")}});ractiveComponent["wtc-Info_cardApp"].on("openCard",function(t,n){Messenger.event("openCard",n)}),ractiveComponent["wtc-Info_cardApp"].on("top_up",function(t,n){swal()}),ractiveComponent["wtc-Info_cardApp"].on("no_comis",function(t,n){var e,o,a;"buy"==n&&(o=_chat_e("Введите примерную сумму, которую вы хотите потратить без комиссии."),a=_chat_e("Для компенсации комиссии введите пожалуйста сумму с запасом 10% для учета возможных конвертаций и сторонних дополнительных комиссий. Время действие услуги - 60мин с момента запроса. Спасибо!"),e=_chat_e("Данная услуга предоставляется в рамках маркетинговой кампании, Telegraf.Money оставляет за собой право в любой момент остановить ее действие.")),"cash"==n&&(o=_chat_e("Введите примерную сумму, которую вы хотите получить без комиссии."),a=_chat_e("Для компенсации комиссии введите пожалуйста сумму с запасом 10% для учета возможных конвертаций и сторонних дополнительных комиссий. Время действие услуги - 60мин с момента запроса. Спасибо!"),e=_chat_e("Данная услуга предоставляется в рамках маркетинговой кампании, Telegraf.Money оставляет за собой право в любой момент остановить ее действие.")),swal({customClass:"swal-telegraf-modal select-form text-center",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Подтвердить"),cancelButtonText:_chat_e("Отменить"),showCancelButton:!0,text:'<div class="mv-area code-area-sec"><form action="#" onsubmit="return false;"><div class="select-form"><label>'+o+'</label><input class="form-control" placeholder="'+_chat_e("Сумма")+'" id="input_sw" autocomplete="off" type="tel"></div><br></form><label>'+a+'</label><p class="spls-p">'+e+"</p><br></div>"}).then(function(t){var n=$("#input_sw").val();swal({customClass:"swal-telegraf-modal select-form text-center",title:_chat_e("Активация..."),closeOnConfirm:!1,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!0,showCancelButton:!1,showLoaderOnConfirm:!0,text:"",preConfirm:function(){return new Promise(function(t,n){setTimeout(function(){t()},3e4)})}}),swal.showLoading(),API("cardСommissionCompensation",{card_id:Messenger.cardID,amount:n},!1,function(t){if(t.error)return swal({title:_chat_e("Успешно"),type:"error",customClass:"swal-telegraf-modal select-form",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Ok"),cancelButtonText:_chat_e("Отменить"),showCancelButton:!1,text:"ERROR:"+t.error});swal({title:_chat_e("Успешно"),type:"success",customClass:"swal-telegraf-modal select-form",buttonsStyling:!1,confirmButtonClass:"button-n",cancelButtonClass:"cansel-btns",confirmButtonText:_chat_e("Ok"),cancelButtonText:_chat_e("Отменить"),showCancelButton:!1,text:_chat_e("Вы успешно активировали услугу. Время действие услуги - 60мин.")})},!0)},function(){})});